<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">
<h:head>
	<title>Sistema de inventarios</title>
</h:head>
<h:body>
	<h:form id="form">
		<p:growl id="msgs" showDetail="true" />
		<!-- tiene el prefijo p, esto quiere decir que se esta usando
primefaces -->
		<p:dataTable id="ventas" var="venta"
			value="#{ventasBean.getVentasList()}" editable="true"
			style="margin-bottom:20px">
			<f:facet name="header">
				CRUD DE VENTAS
			</f:facet>
			<p:ajax event="rowEdit" listener="#{ventasBean.onRowEdit}"
				update=":form:msgs" />
			<p:ajax event="rowEditCancel" listener="#{ventasBean.onRowCancel}"
				update=":form:msgs" />
			<p:column headerText="Id">
				<p:cellEditor>
					<f:facet name="output">
						<h:outputText value="#{venta.idventa}" />
					</f:facet>
					<f:facet name="input">
						<h:inputText id="ventasInput" value="#{venta.idventa}"
							style="width:100%" />
					</f:facet>
				</p:cellEditor>
			</p:column>
			<p:column headerText="Cliente">
				<p:cellEditor>
					<f:facet name="output">
						<h:outputText value="#{venta.cliente.id} - #{venta.cliente.nombre} #{venta.cliente.apellido}" />
					</f:facet>
					<f:facet name="input">
						<p:selectOneMenu id="selectCliente" value="#{ventasBean.cliente}"
							var="temp" converter="#{clienteConverter}" effect="fade"
							filter="true" panelStyle="width:300px" style="width:335px"
							filterMatchMode="startsWith" required="true"
							requiredMessage="Debe seleccionar un cliente">
							<f:selectItem itemLabel="Seleccione un cliente"
								itemValue="#{null}" process="@this" />
							<f:selectItems value="#{clienteBean.getClienteList()}" var="cliente"
								itemLabel="#{cliente.id} - #{cliente.nombre} #{venta.cliente.apellido}"
								itemValue="#{cliente}" />
							<p:column style="width:10%">
								<h:outputText value="#{temp.id}" />
							</p:column>
							<p:column>
								<h:outputText value="#{temp.nombre} #{temp.apellido}" />
							</p:column>
						</p:selectOneMenu>
					</f:facet>
				</p:cellEditor>
			</p:column>
			<p:column headerText="Total venta">
				<p:cellEditor>
					<f:facet name="output">
						<h:outputText value="#{venta.totalventa}" />
					</f:facet>
					<f:facet name="input">
						<h:inputText value="#{venta.totalventa}" style="width:100%"
							label="totalventa" />
					</f:facet>
				</p:cellEditor>
			</p:column>
			<p:column headerText="Fecha de la venta">
				<p:cellEditor>
					<f:facet name="output">
						<h:outputText value="#{venta.getFechaString()}" />
					</f:facet>
					<f:facet name="input">
	        			<p:calendar id="datetime" value="#{venta.fecha}" pattern="MM/dd/yyyy HH:mm:ss" label="fecha"/>
					</f:facet>
				</p:cellEditor>
			</p:column>
			<p:column style="width:32px">
				<p:rowEditor />
			</p:column>
			<f:facet name="footer">

			</f:facet>
		</p:dataTable>
		<a href="/FrameworksPresentacion_equipo2/">Retornar al index</a>
	</h:form>
	
	<script type="text/javascript">    
	    PrimeFaces.locales['de'] = {
	        closeText: 'Schließen',
	        prevText: 'Zurück',
	        nextText: 'Weiter',
	        monthNames: ['Januar', 'Februar', 'März', 'April', 'Mai', 'Juni', 'Juli', 'August', 'September', 'Oktober', 'November', 'Dezember'],
	        monthNamesShort: ['Jan', 'Feb', 'März', 'Apr', 'Mai', 'Jun', 'Jul', 'Aug', 'Sep', 'Okt', 'Nov', 'Dez'],
	        dayNames: ['Sonntag', 'Montag', 'Dienstag', 'Mittwoch', 'Donnerstag', 'Freitag', 'Samstag'],
	        dayNamesShort: ['Son', 'Mon', 'Die', 'Mit', 'Don', 'Fre', 'Sam'],
	        dayNamesMin: ['S', 'M', 'D', 'M ', 'D', 'F ', 'S'],
	        weekHeader: 'Woche',
	        FirstDay: 1,
	        isRTL: false,
	        showMonthAfterYear: false,
	        yearSuffix: '',
	        timeOnlyTitle: 'Nur Zeit',
	        timeText: 'Zeit',
	        hourText: 'Stunde',
	        minuteText: 'Minute',
	        secondText: 'Sekunde',
	        currentText: 'Aktuelles Datum',
	        ampm: false,
	        month: 'Monat',
	        week: 'Woche',
	        day: 'Tag',
	        allDayText: 'Ganzer Tag'
	    };
	</script>
</h:body>
</html>
